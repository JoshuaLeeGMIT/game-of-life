<!DOCTYPE html>
<!--Conways game of life cart -->
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"/>
    <link rel="stylesheet" href="style.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono|Press+Start+2P"/>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script type="text/javascript" src="gol.js"></script>
    <title>Game of Life -- Cart</title>
  </head>
  <body>
    <!-- HTML for the navbar--from https://getbootstrap.com/docs/4.3/components/navs/ (JL) -->
    <div class="flexbox">
      <ul class="nav justify-content-center">
        <li class="nav-item">
          <a class="nav-link active" href="index.html">home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="gol.html">game</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="shop.html">store</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="cart.html">cart</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="account.html">account</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="about.html" >about</a>
        </li>
      </ul>
    </div>
    <div class="container">
	  <!--Displays the infomation for Glider(EL) -->
	  <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-2 border"><h4>Name</h4></div>
        <div class="col-md-2 border"><h4>Quantity</h4></div>
        <div class="col-md-2 border"><h4>Price</h4></div>
        <div class="col-md-3"></div>
      </div>
      <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-2 border">Glider</h5></div>
        <div class="col-md-2 border"><h5 id="gQuanity"></h5></div>
        <div class="col-md-2 border"><h5 id="gPrice"></h5></div>
        <div class="col-md-3"></div>
      </div>
	  <!--Displays the infomation for Spaceship(EL) -->
	  <div class="row">
        <div class="col-md-3 "></div>
        <div class="col-md-2 border">Spaceship</div>
        <div class="col-md-2 border"><h5 id="lQuanity"></h5></div>
        <div class="col-md-2 border"><h5 id="lPrice"></h5></div>
        <div class="col-md-3 "></div>
      </div>
	  <!--Displays the infomation for Pentadecathlon(EL) -->
      <div class="row">
        <div class="col-md-3 "></div>
        <div class="col-md-2 border">Pentadecathlon</div>
        <div class="col-md-2 border"><h5 id="pQuanity"></h5></div>
        <div class="col-md-2 border"><h5 id="pPrice"></h5></div>
        <div class="col-md-3 "></div>
      </div>
      <div class="row">
	  <!--Displays the current infomation for Detonator(EL) -->
      <div class="row">
        <div class="col-md-3 "></div>
        <div class="col-md-2 border">Detonator</div>
        <div class="col-md-2 border"><h5 id="eQuanity"></h5></div>
        <div class="col-md-2 border"><h5 id="ePrice"></h5></div>
        <div class="col-md-3 "></div>
      </div>
	  <!--Displays the current over all totals(EL) -->
      <div class="row">
        <div class="col-md-3 "></div>
        <div class="col-md-2 border"><h5>Total</h5></div>
        <div class="col-md-2 border"><h5 id="qTotal"></h5></div>
        <div class="col-md-2 border"><h5 id="cTotal"></h5></div>
        <div class="col-md-3 "></div>
      </div>
      <center>
				<!-- Added (SB) - input group code block orginated from -> https://getbootstrap.com/docs/4.0/components/input-group/ -->
				<!-- Add id; onclick; coupon label and button text (EL) -->
				<div class="input-group col-lg-6 col-md-8 col-sm-10">	    	 
					<div class="input-group-prepend">
    				<span class="input-group-text">Coupon code:</span>
  				</div>
					<input id="couponInput" type="text" class="form-control">
        	<div class="input-group-append">
          	<!--On click Calls the coupon function(EL) -->
			<button class="btn btn-primary" type="button" onclick="coupon()">Apply</button>
        	</div>
      	</div>
			<!--On click Calls the buy function(EL) -->
	  		<button type="button" class="btn btn-primary" onclick="buy()">Buy pieces</button>
			<!--On click Calls the cancel function(EL) -->
			<button type="button" class="btn btn-primary" onclick="cancel()">Cancel pieces</button>
	  	</center>
    </div>
  </body>
</html>
<script>
	/*Declares the total values(EL) */
	let gTotal, lTotal, pTotal, eTotal, nQTotal, nCTotal;
	/*Declares the Local storage(EL) */
	let cart = JSON.parse(localStorage.getItem('cart'));
	 let userInfo = JSON.parse(localStorage.getItem('userInfo')); 
	/*Make sure valuse are comfrimed(EL) */
  if (localStorage.userInfo == null) {
    addUserToStorage = { userName: localStorage.loggedInUser, userPass: localStorage.loggedPass, gliderOwned: 0, lwssOwned: 0, pentaOwned: 0, explOwned: 0 };
    localStorage.setItem('userInfo', JSON.stringify(addUserToStorage));
  }

/*Ativates the display function(EL) */  
display();
/*Displays the needed infomation(EL) */
function display() {
	/*Calacuates the current totals(EL) */
	gTotal = cart.nGliders * 1;
	lTotal = cart.nLwss * 2.5;
	pTotal = cart.nPenta * 5.99;
	eTotal = cart.nExpl * 6.99;
	nQTotal = cart.nGliders + cart.nLwss + cart.nPenta + cart.nExpl;
	nCTotal = gTotal + lTotal + pTotal + eTotal;
	/*Displays the current infomation(EL) */
	document.getElementById("gQuanity").innerHTML = cart.nGliders;
	document.getElementById("gPrice").innerHTML = "€" + gTotal;
	
	document.getElementById("lQuanity").innerHTML = cart.nLwss;
	document.getElementById("lPrice").innerHTML = "€" + lTotal;
	
	document.getElementById("pQuanity").innerHTML = cart.nPenta;
	document.getElementById("pPrice").innerHTML = "€" + pTotal;
	
	document.getElementById("eQuanity").innerHTML = cart.nExpl; 
	document.getElementById("ePrice").innerHTML = "€" + eTotal;
	
	document.getElementById("qTotal").innerHTML = nQTotal + " pieces";
	document.getElementById("cTotal").innerHTML = "€" + nCTotal;
}
/*This sees  */
function coupon() {
	/* */
	let couponNumber = Number(document.getElementById("couponInput").value);
	/*Sees if the its the coupon number(EL) */
	if(couponNumber == 12345)
	{
		alert("Coupon Successful");
		nCTotal -= (nCTotal/10)
		document.getElementById("cTotal").innerHTML = "€" + nCTotal;
	}
	else
	{
		alert("Coupon is wrong or invalid");
	}
}
/*Adds all peices form cart to user*/
function buy() {
  alert("Purcase(s) was sucessfull");    
  userInfo.gliderOwned += cart.nGliders;
  userInfo.lwssOwned += cart.nLwss;
  userInfo.pentaOwned += cart.nPenta;
  userInfo.explOwned += cart.nExpl;
  localStorage.setItem('userInfo', JSON.stringify(userInfo));
  /*Class reset(El)*/
  reset();
}

/*Cancels all pecies form cart(EL) */
function cancel() {
	alert("All items cancled");
	/*Class reset(El)*/
	reset();
}
/*Reset everything back to 0(EL) */
function reset() {
	localStorage.cart = JSON.stringify(cart);
	cart.nGliders = 0;	
	cart.nLwss = 0;
	cart.nPenta = 0;
	cart.nExpl = 0;
	gTotal = 0;
	lTotal = 0;
	pTotal = 0;
	eTotal = 0;
	nQTotal = 0;
	nCTotal = 0;
	/*Updates page(EL)*/
	document.getElementById("gQuanity").innerHTML = cart.nGliders;
	document.getElementById("gPrice").innerHTML = "€" + gTotal;
	
	document.getElementById("lQuanity").innerHTML = cart.nLwss;
	document.getElementById("lPrice").innerHTML = "€" + lTotal;
	
	document.getElementById("pQuanity").innerHTML = cart.nPenta; 
	document.getElementById("pPrice").innerHTML = "€" + pTotal.toFixed(2);
	
	document.getElementById("eQuanity").innerHTML = cart.nExpl;
	document.getElementById("ePrice").innerHTML = "€" + eTotal.toFixed(2);
	
	document.getElementById("qTotal").innerHTML = nQTotal + " pieces";
	document.getElementById("cTotal").innerHTML = "€" + nCTotal;
}
</script>
